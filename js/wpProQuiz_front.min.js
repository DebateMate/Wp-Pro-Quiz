!function(i,e){i=i||"wpProQuizReady",e=e||window;var t=[],o=!1,n=!1;function r(){if(!o){o=!0;for(var i=0;i<t.length;i++)t[i].fn.call(window,t[i].ctx);t=[]}}function s(){"complete"===document.readyState&&r()}e[i]=function(i,e){o?setTimeout(function(){i(e)},1):(t.push({fn:i,ctx:e}),"complete"===document.readyState?setTimeout(r,1):n||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",r)),n=!0))}}("wpProQuizReady",window),wpProQuizReady(function(){for(var i=window.wpProQuizInitList||[],e=0;e<i.length;e++)jQuery(i[e].id).wpProQuizFront(i[e].init)}),function(C){C.wpProQuizFront=function(i,n){var e,s,a,z=C(i),f=n,w=this,m=new Object,Q=new Object,r=0,u=null,d=[],c="",t=!1,p=1,v={randomAnswer:0,randomQuestion:0,disabledAnswerMark:0,checkBeforeStart:0,preview:0,cors:0,isAddAutomatic:0,quizSummeryHide:0,skipButton:0,reviewQustion:0,autoStart:0,forcingQuestionSolve:0,hideQuestionPositionOverview:0,formActivated:0,maxShowQuestion:0,sortCategories:0},l={isQuizStart:0,isLocked:0,loadLock:0,isPrerequisite:0,isUserStartLocked:0},_='input[name="check"]',P='input[name="next"]',g=".wpProQuiz_questionList",q='input[name="skip"]',h='input[name="wpProQuiz_pageLeft"]',x='input[name="wpProQuiz_pageRight"]',k={back:z.find('input[name="back"]'),next:z.find(P),quiz:z.find(".wpProQuiz_quiz"),questionList:z.find(".wpProQuiz_list"),results:z.find(".wpProQuiz_results"),quizStartPage:z.find(".wpProQuiz_text"),timelimit:z.find(".wpProQuiz_time_limit"),toplistShowInButton:z.find(".wpProQuiz_toplistShowInButton"),listItems:C()},S={token:"",isUser:0},b=0,y=1,I=(e=f.timelimit,s=0,a={stop:function(){e&&(window.clearInterval(s),k.timelimit.hide())},start:function(){if(e){var t=1e3*e,o=k.timelimit.find("span").text(w.methode.parseTime(e)),n=k.timelimit.find(".wpProQuiz_progress");k.timelimit.show();var r=+new Date;s=window.setInterval(function(){var i=+new Date-r,e=t-i;500<=i&&o.text(w.methode.parseTime(Math.ceil(e/1e3))),n.css("width",e/t*100+"%"),e<=0&&(a.stop(),w.methode.finishQuiz(!0))},16)}}}),L=new function(){var a=[],u=[],d=[],c=[],o=0,n=0,p=0,r=0,l=0,s=[];function e(i){var e="",t=s[i];t.review?e="#FFB800":t.solved&&(e="#6CA54C"),c.eq(i).css("background-color",e)}function t(i){i.preventDefault();var e=i.pageY-n;e<0&&(e=0),o<e&&(e=o);var t=p*e;d.attr("style","margin-top: "+-t+"px !important"),u.css({top:e})}function h(i){i.preventDefault(),C(document).unbind(".scrollEvent")}this.init=function(){a=z.find(".wpProQuiz_reviewQuestion"),u=a.find("div"),d=a.find("ol"),c=d.children(),u.mousedown(function(i){i.preventDefault(),i.stopPropagation(),n=i.pageY-u.offset().top+r,C(document).bind("mouseup.scrollEvent",h),C(document).bind("mousemove.scrollEvent",t)}),c.click(function(i){w.methode.showQuestion(C(this).index())}),z.bind("questionSolved",function(i){s[i.values.index].solved=i.values.solved,e(i.values.index)}),z.bind("changeQuestion",function(i){c.removeClass("wpProQuiz_reviewQuestionTarget"),c.eq(i.values.index).addClass("wpProQuiz_reviewQuestionTarget"),function(i){var e=c.eq(i),t=e.offset().top,o=a.offset().top,n=t-o;if(n-4<0||100<n+32){var r=o-c.eq(0).offset().top-(o-d.offset().top)+e.position().top;l<r&&(r=l);var s=r/p;d.attr("style","margin-top: "+-r+"px !important"),u.css({top:s})}}(i.values.index)}),z.bind("reviewQuestion",function(i){s[i.values.index].review=!s[i.values.index].review,e(i.values.index)}),a.bind("mousewheel DOMMouseScroll",function(i){i.preventDefault();var e=i.originalEvent,t=20*(e.wheelDelta?-e.wheelDelta/120:e.detail/3),o=r-d.offset().top+t;l<o&&(o=l),o<0&&(o=0);var n=o/p;return d.attr("style","margin-top: "+-o+"px !important"),u.css({top:n}),!1})},this.show=function(i){if(v.reviewQustion&&a.parent().show(),z.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(),!i){d.attr("style","margin-top: 0px !important"),u.css({top:0});var e=d.outerHeight(),t=a.height();o=t-u.height(),n=0,p=(l=e-t)/o,this.reset(),100<e&&u.show(),r=u.offset().top}},this.hide=function(){a.parent().hide()},this.toggle=function(){if(v.reviewQustion){a.parent().toggle(),c.removeClass("wpProQuiz_reviewQuestionTarget"),z.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(),d.attr("style","margin-top: 0px !important"),u.css({top:0});var i=d.outerHeight(),e=a.height();o=e-u.height(),n=0,p=(l=i-e)/o,100<i&&u.show(),r=u.offset().top}},this.reset=function(){for(var i=0,e=c.length;i<e;i++)s[i]={};c.removeClass("wpProQuiz_reviewQuestionTarget").css("background-color","")}};var A=new function(){var e=0,t=-1,i=0,o=!1;this.questionStart=function(i){-1!=t&&this.questionStop(),t=i,e=+new Date},this.questionStop=function(){-1!=t&&(m[t].time+=Math.round((new Date-e)/1e3),t=-1)},this.startQuiz=function(){o&&this.stopQuiz(),i=+new Date,o=!0},this.stopQuiz=function(){o&&(m.comp.quizTime+=Math.round((new Date-i)/1e3),o=!1)},this.init=function(){}},T=new function(){var u=function(i){return!(i=C.trim(i))||0===i.length},d=0,c=1,p=2,l=3,h=4,f=5,w=6,m=7,Q=8;this.checkForm=function(){var a=!0;return z.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var i=C(this),e=1==i.data("required"),t=i.data("type"),o=!0,n=C.trim(i.val());switch(t){case d:case c:case m:e&&(o=!u(n));break;case p:!e&&u(n)||(o=!u(n)&&!isNaN(n));break;case h:!e&&u(n)||(o=!u(n)&&new RegExp(/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/).test(n.toLowerCase()));break;case l:e&&(o=i.is(":checked"));break;case f:case Q:e&&(o=void 0!==i.find('input[type="radio"]:checked').val());break;case w:var r=0,s=0;i.find("select").each(function(){r++,s+=u(C(this).val())?0:1}),(e||0<s)&&(o=r==s)}o?i.siblings(".wpProQuiz_invalidate").hide():(a=!1,i.siblings(".wpProQuiz_invalidate").show())}),a},this.getFormData=function(){var t={};return z.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var i=C(this),e=i.data("form_id");switch(i.data("type")){case d:case c:case m:case p:case h:t[e]=i.val();break;case l:t[e]=i.is(":checked")?1:0;break;case f:case Q:t[e]=i.find('input[type="radio"]:checked').val();break;case w:t[e]={day:i.find('select[name="wpProQuiz_field_'+e+'_day"]').val(),month:i.find('select[name="wpProQuiz_field_'+e+'_month"]').val(),year:i.find('select[name="wpProQuiz_field_'+e+'_year"]').val()}}}),t}};w.methode={parseBitOptions:function(){if(f.bo){v.randomAnswer=1&f.bo,v.randomQuestion=2&f.bo,v.disabledAnswerMark=4&f.bo,v.checkBeforeStart=8&f.bo,v.preview=16&f.bo,v.isAddAutomatic=64&f.bo,v.reviewQustion=128&f.bo,v.quizSummeryHide=256&f.bo,v.skipButton=512&f.bo,v.autoStart=1024&f.bo,v.forcingQuestionSolve=2048&f.bo,v.hideQuestionPositionOverview=4096&f.bo,v.formActivated=8192&f.bo,v.maxShowQuestion=16384&f.bo,v.sortCategories=32768&f.bo;var i=32&f.bo;i&&null!=jQuery.support&&null!=jQuery.support.cors&&0==jQuery.support.cors&&(v.cors=i)}},setClozeStyle:function(){z.find(".wpProQuiz_cloze input").each(function(){for(var i=C(this),e="",t=i.data("wordlen"),o=0;o<t;o++)e+="w";var n=C(document.createElement("span")).css("visibility","hidden").text(e).appendTo(C("body")),r=n.width();n.remove(),i.width(r+5)})},parseTime:function(i){var e=parseInt(i%60),t=parseInt(i/60%60),o=parseInt(i/3600%24);return(o=(9<o?"":"0")+o)+":"+(t=(9<t?"":"0")+t)+":"+(e=(9<e?"":"0")+e)},cleanupCurlyQuotes:function(i){return i=(i=(i=(i=i.replace(/\u2018/,"'")).replace(/\u2019/,"'")).replace(/\u201C/,'"')).replace(/\u201D/,'"'),C.trim(i).toLowerCase()},resetMatrix:function(i){i.each(function(){var i=C(this),e=i.find(".wpProQuiz_sortStringList");i.find(".wpProQuiz_sortStringItem").each(function(){e.append(C(this))})})},marker:function(i,e){v.disabledAnswerMark||(e?i.addClass("wpProQuiz_answerCorrect"):i.addClass("wpProQuiz_answerIncorrect"))},startQuiz:function(i){if(l.loadLock)l.isQuizStart=1;else{if(l.isQuizStart=0,l.isLocked)return k.quizStartPage.hide(),void z.find(".wpProQuiz_lock").show();if(l.isPrerequisite)return k.quizStartPage.hide(),void z.find(".wpProQuiz_prerequisite").show();if(l.isUserStartLocked)return k.quizStartPage.hide(),void z.find(".wpProQuiz_startOnlyRegisteredUser").show();if(v.maxShowQuestion&&!i)return k.quizStartPage.hide(),z.find(".wpProQuiz_loadQuiz").show(),void w.methode.loadQuizDataAjax(!0);if(!v.formActivated||f.formPos!=b||T.checkForm()){switch(w.methode.loadQuizData(),v.randomQuestion&&w.methode.random(k.questionList),v.randomAnswer&&w.methode.random(z.find(g)),v.sortCategories&&w.methode.sortCategories(),w.methode.random(z.find(".wpProQuiz_sortStringList")),w.methode.random(z.find('[data-type="sort_answer"]')),z.find(".wpProQuiz_listItem").each(function(i,e){var t=C(this);t.find(".wpProQuiz_question_page span:eq(0)").text(i+1),t.find("> h5 span").text(i+1),t.find(".wpProQuiz_questionListItem").each(function(i,e){C(this).find("> span:not(.wpProQuiz_cloze)").text(i+1+". ")})}),k.next=z.find(P),f.mode){case 3:z.find('input[name="checkSingle"]').show();break;case 2:z.find(_).show(),!v.skipButton&&v.reviewQustion&&z.find(q).show();break;case 1:z.find('input[name="back"]').slice(1).show();case 0:k.next.show()}(v.hideQuestionPositionOverview||3==f.mode)&&z.find(".wpProQuiz_question_page").hide();var e=k.next.last();c=e.val(),e.val(f.lbn);var t=k.questionList.children();if(k.listItems=z.find(".wpProQuiz_list > li"),3==f.mode)w.methode.showSinglePage(0);else{var o=(u=t.eq(0).show()).find(g).data("question_id");A.questionStart(o)}A.startQuiz(),z.find(".wpProQuiz_sortable").parents("ul").sortable({update:function(i,e){var t=C(this).parents(".wpProQuiz_listItem");z.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:!0}})}}).disableSelection(),z.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({connectWith:".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList",placeholder:"wpProQuiz_placehold",update:function(i,e){var t=C(this).parents(".wpProQuiz_listItem");z.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:!0}})}}).disableSelection(),d=[],I.start(),r=+new Date,m={comp:{points:0,correctQuestions:0,quizTime:0}},z.find(".wpProQuiz_questionList").each(function(){var i=C(this).data("question_id");m[i]={time:0,solved:0}}),Q={},C.each(n.catPoints,function(i,e){Q[i]=0}),k.quizStartPage.hide(),z.find(".wpProQuiz_loadQuiz").hide(),k.quiz.show(),L.show(),3!=f.mode&&z.trigger({type:"changeQuestion",values:{item:u,index:u.index()}})}}},showSingleQuestion:function(i){var e=i?Math.ceil(i/f.qpp):1;this.showSinglePage(e)},showSinglePage:function(i){if($listItem=k.questionList.children().hide(),f.qpp){i=i?+i:1;var e=Math.ceil(z.find(".wpProQuiz_list > li").length/f.qpp);if(!(e<i)){var t=z.find(h).hide(),o=z.find(x).hide(),n=z.find('input[name="checkSingle"]').hide();1<i&&t.val(t.data("text").replace(/%d/,i-1)).show(),i==e?n.show():o.val(o.data("text").replace(/%d/,i+1)).show(),p=i;var r=f.qpp*(i-1);$listItem.slice(r,r+f.qpp).show(),w.methode.scrollTo(k.quiz)}}else $listItem.show()},nextQuestion:function(){this.showQuestionObject(u.next())},prevQuestion:function(){this.showQuestionObject(u.prev())},showQuestion:function(i){var e=k.listItems.eq(i);if(3==f.mode||t)return f.qpp&&w.methode.showSingleQuestion(i+1),w.methode.scrollTo(e,1),void A.startQuiz();this.showQuestionObject(e)},showQuestionObject:function(i){if(!i.length&&v.forcingQuestionSolve&&v.quizSummeryHide&&v.reviewQustion)for(var e=0,t=z.find(".wpProQuiz_listItem").length;e<t;e++)if(!d[e])return alert(WpProQuizGlobal.questionsNotSolved),!1;if(u.hide(),u=i.show(),w.methode.scrollTo(k.quiz),z.trigger({type:"changeQuestion",values:{item:u,index:u.index()}}),u.length){var o=u.find(g).data("question_id");A.questionStart(o)}else w.methode.showQuizSummary()},skipQuestion:function(){z.trigger({type:"skipQuestion",values:{item:u,index:u.index()}}),w.methode.nextQuestion()},reviewQuestion:function(){z.trigger({type:"reviewQuestion",values:{item:u,index:u.index()}})},showQuizSummary:function(){if(A.questionStop(),A.stopQuiz(),!v.quizSummeryHide&&v.reviewQustion){var e=z.find(".wpProQuiz_checkPage");e.find("ol:eq(0)").empty().append(z.find(".wpProQuiz_reviewQuestion ol li").clone().removeClass("wpProQuiz_reviewQuestionTarget")).children().click(function(i){e.hide(),k.quiz.show(),L.show(!0),w.methode.showQuestion(C(this).index())});for(var i=0,t=0,o=d.length;t<o;t++)d[t]&&i++;e.find("span:eq(0)").text(i),L.hide(),k.quiz.hide(),e.show(),w.methode.scrollTo(e)}else v.formActivated&&f.formPos==y?(L.hide(),k.quiz.hide(),w.methode.scrollTo(z.find(".wpProQuiz_infopage").show())):w.methode.finishQuiz()},finishQuiz:function(i){A.questionStop(),A.stopQuiz(),I.stop();var e=(+new Date-r)/1e3;e=f.timelimit&&e>f.timelimit?f.timelimit:e,z.find(".wpProQuiz_quiz_time span").text(w.methode.parseTime(e)),i&&k.results.find(".wpProQuiz_time_limit_expired").show(),w.methode.checkQuestion(k.questionList.children(),!0),z.find(".wpProQuiz_correct_answer").text(m.comp.correctQuestions),m.comp.result=Math.round(m.comp.points/f.globalPoints*100*100)/100,m.comp.solved=0;var t=z.find(".wpProQuiz_points span");t.eq(0).text(m.comp.points),t.eq(1).text(f.globalPoints),t.eq(2).text(m.comp.result+"%");var o=z.find(".wpProQuiz_resultsList > li").eq(w.methode.findResultIndex(m.comp.result)),n=T.getFormData();o.find(".wpProQuiz_resultForm").each(function(){var i=C(this),e=i.data("form_id"),t=n[e];"object"==typeof t&&(t=t.day+"-"+t.month+"-"+t.year),i.text(t).show()}),o.show(),w.methode.setAverageResult(m.comp.result,!1),this.setCategoryOverview(),w.methode.sendCompletedQuiz(),v.isAddAutomatic&&S.isUser&&w.methode.addToplist(),L.hide(),z.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(),k.quiz.hide(),k.results.show(),w.methode.scrollTo(k.results)},setCategoryOverview:function(){m.comp.cats={},z.find(".wpProQuiz_catOverview li").each(function(){var i=C(this),e=i.data("category_id");if(void 0===f.catPoints[e])return i.hide(),!0;var t=Math.round(Q[e]/f.catPoints[e]*100*100)/100;m.comp.cats[e]=t,i.find(".wpProQuiz_catPercent").text(t+"%"),i.show()})},questionSolved:function(i){d[i.values.index]=i.values.solved;var e=i.values.item.find(g),t=f.json[e.data("question_id")];m[t.id].solved=Number(i.values.fake?m[t.id].solved:i.values.solved)},sendCompletedQuiz:function(){if(!v.preview){var r;r=m,z.find(".wpProQuiz_questionList").each(function(){var i=C(this),e=i.data("question_id"),t=i.data("type"),o={};if("single"==t||"multiple"==t)i.find(".wpProQuiz_questionListItem").each(function(){o[C(this).data("pos")]=+C(this).find(".wpProQuiz_questionInput").is(":checked")});else if("free_answer"==t)o[0]=i.find(".wpProQuiz_questionInput").val();else{if("sort_answer"==t)return!0;if("matrix_sort_answer"==t)return!0;if("cloze_answer"==t){var n=0;i.find(".wpProQuiz_cloze input").each(function(){o[n++]=C(this).val()})}else"assessment_answer"==t&&(o[0]="",i.find(".wpProQuiz_questionInput:checked").each(function(){o[C(this).data("index")]=C(this).val()}))}r[e].data=o});var i=T.getFormData();w.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"completedQuiz",data:{quizId:f.quizId,results:m,forms:i}})}},findResultIndex:function(i){for(var e=f.resultsGrade,t=-1,o=999999,n=0;n<e.length;n++){var r=e[n];r<=i&&i-r<o&&(o=i-r,t=n)}return t},showQustionList:function(){t=!t,k.toplistShowInButton.hide(),k.quiz.toggle(),z.find(".wpProQuiz_QuestionButton").hide(),k.questionList.children().show(),L.toggle(),z.find(".wpProQuiz_question_page").hide()},random:function(i){i.each(function(){var i=C(this).children().get().sort(function(){return Math.round(Math.random())-.5});C(i).appendTo(i[0].parentNode)})},sortCategories:function(){var i=C(".wpProQuiz_list").children().get().sort(function(i,e){var t=C(i).find(".wpProQuiz_questionList").data("question_id"),o=C(e).find(".wpProQuiz_questionList").data("question_id");return f.json[t].catId-f.json[o].catId});C(i).appendTo(i[0].parentNode)},restartQuiz:function(){k.results.hide(),k.quizStartPage.show(),k.questionList.children().hide(),k.toplistShowInButton.hide(),L.hide(),z.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color",""),z.find('.wpProQuiz_questionListItem input[type="text"]').val(""),z.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"),z.find(".wpProQuiz_listItem").data("check",!1),z.find(".wpProQuiz_response").hide().children().hide(),w.methode.resetMatrix(z.find(".wpProQuiz_listItem")),z.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"),z.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(),z.find('.wpProQuiz_question_page, input[name="tip"]').show(),z.find(".wpProQuiz_resultForm").text("").hide(),k.results.find(".wpProQuiz_time_limit_expired").hide(),k.next.last().val(c),t=!1},checkQuestion:function(i,h){(i=null==i?u:i).each(function(){var i=C(this),e=i.find(g),t=f.json[e.data("question_id")],o=t.type;if(A.questionStop(),i.data("check"))return!0;"single"!=t.type&&"multiple"!=t.type||(o="singleMulti");var n,s,r,a,u,d,c,p,l=(n=o,s=t,r=i,a=e,u=!0,d=0,c=C.isArray(s.points),p={},{singleMulti:function(){var n=a.find(".wpProQuiz_questionInput").attr("disabled","disabled"),r=s.diffMode;a.children().each(function(i){var e=C(this),t=e.data("pos"),o=n.eq(i).is(":checked");s.correct[t]?(o?c&&(r?d=s.points[t]:d+=s.points[t]):u=!1,s.disCorrect?u=!0:w.methode.marker(e,!0)):o?(s.disCorrect?u=!0:(w.methode.marker(e,!1),u=!1),r&&(d=s.points[t])):c&&!r&&(d+=s.points[t])})},sort_answer:function(){var i=a.children();i.each(function(i,e){var t=C(this);p[i]=t.data("pos"),i==t.data("pos")?(w.methode.marker(t,!0),c&&(d+=s.points[i])):(w.methode.marker(t,!1),u=!1)}),i.children().css({"box-shadow":"0 0",cursor:"auto"}),a.sortable("destroy")},matrix_sort_answer:function(){var i=a.children(),n=new Array;p={0:-1},i.each(function(){var i=C(this),e=i.data("pos"),t=i.find(".wpProQuiz_maxtrixSortCriterion"),o=t.children();o.length&&(p[e]=o.data("pos")),o.length&&0<=C.inArray(String(e),String(o.data("correct")).split(","))?(w.methode.marker(t,!0),c&&(d+=s.points[e])):(u=!1,w.methode.marker(t,!1)),n[e]=t}),w.methode.resetMatrix(r),r.find(".wpProQuiz_sortStringItem").each(function(){var i=n[C(this).data("pos")];null!=i&&i.append(this)}).css({"box-shadow":"0 0",cursor:"auto"}),r.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy")},free_answer:function(){var i=a.children(),e=i.find(".wpProQuiz_questionInput").attr("disabled","disabled").val();0<=C.inArray(C.trim(e).toLowerCase(),s.correct)?w.methode.marker(i,!0):(w.methode.marker(i,!1),u=!1)},cloze_answer:function(){a.find(".wpProQuiz_cloze").each(function(i,e){var t=C(this).children(),o=t.eq(0),n=t.eq(1),r=w.methode.cleanupCurlyQuotes(o.val());0<=C.inArray(r,s.correct[i])?(c&&(d+=s.points[i]),v.disabledAnswerMark||o.css("background-color","#B0DAB0")):(v.disabledAnswerMark||o.css("background-color","#FFBABA"),u=!1,n.show()),o.attr("disabled","disabled")})},assessment_answer:function(){u=!0;var i=a.find(".wpProQuiz_questionInput").attr("disabled","disabled"),e=0;i.filter(":checked").each(function(){e+=parseInt(C(this).val())}),d=e}}[n](),!c&&u&&(d=s.points),{c:u,p:d,s:p});i.find(".wpProQuiz_response").show(),i.find(_).hide(),i.find(q).hide(),i.find(P).show(),m[t.id].points=l.p,m[t.id].correct=Number(l.c),m[t.id].data=l.s,m.comp.points+=l.p,Q[t.catId]+=l.p,l.c?(i.find(".wpProQuiz_correct").show(),m.comp.correctQuestions+=1):i.find(".wpProQuiz_incorrect").show(),i.find(".wpProQuiz_responsePoints").text(l.p),i.data("check",!0),h||z.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0,fake:!0}})})},showTip:function(){var i=C(this),e=i.siblings(".wpProQuiz_question").find(g).data("question_id");i.siblings(".wpProQuiz_tipp").toggle("fast"),m[e].tip=1,C(document).bind("mouseup.tipEvent",function(i){var e=z.find(".wpProQuiz_tipp"),t=z.find('input[name="tip"]');e.is(i.target)||0!=e.has(i.target).length||t.is(i.target)||(e.hide("fast"),C(document).unbind(".tipEvent"))})},ajax:function(i,e,t){t=t||"json",v.cors&&(jQuery.support.cors=!0),C.post(WpProQuizGlobal.ajaxurl,i,e,t),v.cors&&(jQuery.support.cors=!1)},checkQuizLock:function(){l.loadLock=1,w.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"quizCheckLock",data:{quizId:f.quizId}},function(i){null!=i.lock&&(l.isLocked=i.lock.is,i.lock.pre&&z.find('input[name="restartQuiz"]').hide()),null!=i.prerequisite&&(l.isPrerequisite=1,z.find(".wpProQuiz_prerequisite span").text(i.prerequisite)),null!=i.startUserLock&&(l.isUserStartLocked=i.startUserLock),l.loadLock=0,l.isQuizStart&&w.methode.startQuiz()})},loadQuizData:function(){w.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"loadQuizData",data:{quizId:f.quizId}},function(i){i.toplist&&w.methode.handleToplistData(i.toplist),null!=i.averageResult&&w.methode.setAverageResult(i.averageResult,!0)})},setAverageResult:function(i,e){var t=z.find(".wpProQuiz_resultValue:eq("+(e?0:1)+") > * ");t.eq(1).text(i+"%"),t.eq(0).css("width",240*i/100+"px")},handleToplistData:function(i){var e=z.find(".wpProQuiz_addToplist"),t=e.find(".wpProQuiz_addBox").show().children("div");if(i.canAdd)if(e.show(),e.find(".wpProQuiz_addToplistMessage").hide(),e.find(".wpProQuiz_toplistButton").show(),S.token=i.token,S.isUser=0,i.userId)t.hide(),S.isUser=1,v.isAddAutomatic&&e.hide();else{t.show();var o=t.children().eq(1);i.captcha?(o.find('input[name="wpProQuiz_captchaPrefix"]').val(i.captcha.code),o.find(".wpProQuiz_captchaImg").attr("src",i.captcha.img),o.find('input[name="wpProQuiz_captcha"]').val(""),o.show()):o.hide()}else e.hide()},scrollTo:function(i,e){var t=i.offset().top-100;(e||(window.pageYOffset||document.body.scrollTop)>t)&&C("html,body").animate({scrollTop:t},300)},addToplist:function(){if(!v.preview){var e=z.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(),t=z.find(".wpProQuiz_addBox").hide();w.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"addInToplist",data:{quizId:f.quizId,token:S.token,name:t.find('input[name="wpProQuiz_toplistName"]').val(),email:t.find('input[name="wpProQuiz_toplistEmail"]').val(),captcha:t.find('input[name="wpProQuiz_captcha"]').val(),prefix:t.find('input[name="wpProQuiz_captchaPrefix"]').val(),points:m.comp.points,totalPoints:f.globalPoints}},function(i){e.text(i.text),i.clear?(t.hide(),w.methode.updateToplist()):t.show(),i.captcha&&(t.find(".wpProQuiz_captchaImg").attr("src",i.captcha.img),t.find('input[name="wpProQuiz_captchaPrefix"]').val(i.captcha.code),t.find('input[name="wpProQuiz_captcha"]').val(""))})}},updateToplist:function(){"function"==typeof wpProQuiz_fetchToplist&&wpProQuiz_fetchToplist()},registerSolved:function(){z.find('.wpProQuiz_questionInput[type="text"]').change(function(i){var e=C(this),t=e.parents(".wpProQuiz_listItem"),o=!1;""!=e.val()&&(o=!0),z.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:o}})}),z.find('.wpProQuiz_questionList[data-type="single"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type="assessment_answer"] .wpProQuiz_questionInput').change(function(i){var e=C(this).parents(".wpProQuiz_listItem"),t=this.checked;z.trigger({type:"questionSolved",values:{item:e,index:e.index(),solved:t}})}),z.find(".wpProQuiz_cloze input").change(function(){var i=C(this).parents(".wpProQuiz_listItem"),e=!0;i.find(".wpProQuiz_cloze input").each(function(){if(""==C(this).val())return e=!1}),z.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:e}})}),z.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').change(function(i){var e=C(this).parents(".wpProQuiz_listItem"),t=0;e.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').each(function(i){this.checked&&t++}),z.trigger({type:"questionSolved",values:{item:e,index:e.index(),solved:!!t}})})},loadQuizDataAjax:function(e){w.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"quizLoadData",data:{quizId:f.quizId}},function(i){f.globalPoints=i.globalPoints,f.catPoints=i.catPoints,f.json=i.json,k.quiz.remove(),z.find(".wpProQuiz_quizAnker").after(i.content),k={back:z.find('input[name="back"]'),next:z.find(P),quiz:z.find(".wpProQuiz_quiz"),questionList:z.find(".wpProQuiz_list"),results:z.find(".wpProQuiz_results"),quizStartPage:z.find(".wpProQuiz_text"),timelimit:z.find(".wpProQuiz_time_limit"),toplistShowInButton:z.find(".wpProQuiz_toplistShowInButton"),listItems:C()},w.methode.initQuiz(),e&&w.methode.startQuiz(!0)})},initQuiz:function(){w.methode.setClozeStyle(),w.methode.registerSolved(),k.next.click(function(){if(v.forcingQuestionSolve&&!d[u.index()]&&(v.quizSummeryHide||!v.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;w.methode.nextQuestion()}),k.back.click(function(){w.methode.prevQuestion()}),z.find(_).click(function(){if(v.forcingQuestionSolve&&!d[u.index()]&&(v.quizSummeryHide||!v.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;w.methode.checkQuestion()}),z.find('input[name="checkSingle"]').click(function(){if(v.forcingQuestionSolve&&(v.quizSummeryHide||!v.reviewQustion))for(var i=0,e=z.find(".wpProQuiz_listItem").length;i<e;i++)if(!d[i])return alert(WpProQuizGlobal.questionsNotSolved),!1;w.methode.showQuizSummary()}),z.find('input[name="tip"]').click(w.methode.showTip),z.find('input[name="skip"]').click(w.methode.skipQuestion),z.find('input[name="wpProQuiz_pageLeft"]').click(function(){w.methode.showSinglePage(p-1)}),z.find('input[name="wpProQuiz_pageRight"]').click(function(){w.methode.showSinglePage(p+1)})}},w.preInit=function(){w.methode.parseBitOptions(),L.init(),z.find('input[name="startQuiz"]').click(function(){return w.methode.startQuiz(),!1}),v.checkBeforeStart&&!v.preview&&w.methode.checkQuizLock(),z.find('input[name="reShowQuestion"]').click(function(){w.methode.showQustionList()}),z.find('input[name="restartQuiz"]').click(function(){w.methode.restartQuiz()}),z.find('input[name="review"]').click(w.methode.reviewQuestion),z.find('input[name="wpProQuiz_toplistAdd"]').click(w.methode.addToplist),z.find('input[name="quizSummary"]').click(w.methode.showQuizSummary),z.find('input[name="endQuizSummary"]').click(function(){if(v.forcingQuestionSolve)for(var i=0,e=z.find(".wpProQuiz_listItem").length;i<e;i++)if(!d[i])return alert(WpProQuizGlobal.questionsNotSolved),!1;v.formActivated&&f.formPos==y&&!T.checkForm()||w.methode.finishQuiz()}),z.find('input[name="endInfopage"]').click(function(){T.checkForm()&&w.methode.finishQuiz()}),z.find('input[name="showToplist"]').click(function(){k.quiz.hide(),k.toplistShowInButton.toggle()}),z.bind("questionSolved",w.methode.questionSolved),v.maxShowQuestion||w.methode.initQuiz(),v.autoStart&&w.methode.startQuiz()},w.preInit()},C.fn.wpProQuizFront=function(i){return this.each(function(){null==C(this).data("wpProQuizFront")&&C(this).data("wpProQuizFront",new C.wpProQuizFront(this,i))})}}(jQuery);